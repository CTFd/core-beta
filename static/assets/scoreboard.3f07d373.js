import{d as g,c as f,m as n,C as s}from"./index.7e48942e.js";import{c as y,m as w,e as v}from"./index.955e6486.js";import"./echarts.128204f2.js";function x(i,t,l){let r={title:{left:"center",text:"Top 10 "+(i==="teams"?"Teams":"Users")},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[]},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{containLabel:!0},xAxis:[{type:"time",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter",height:20,top:35,fillerColor:"rgba(233, 236, 241, 0.4)"}],series:[]};const a=Object.keys(t);for(let e=0;e<a.length;e++){const c=[],p=[];for(let o=0;o<t[a[e]].solves.length;o++){c.push(t[a[e]].solves[o].value);const d=g(t[a[e]].solves[o].date);p.push(d.toDate())}const h=y(c);let u=p.map(function(o,d){return[o,h[d]]});r.legend.data.push(t[a[e]].name);const b={name:t[a[e]].name,type:"line",label:{normal:{position:"top"}},itemStyle:{normal:{color:f(t[a[e]].name+t[a[e]].id)}},data:u};r.series.push(b)}return l&&(r=w(r,l)),r}window.Alpine=n;window.CTFd=s;const m=window.scoreboardUpdateInterval||3e5;n.data("ScoreboardDetail",()=>({data:{},show:!0,async update(){this.data=await s.pages.scoreboard.getScoreboardDetail(10);let i=window.scoreboardChartOptions,t=x(s.config.userMode,this.data,i);v(this.$refs.scoregraph,t),this.show=Object.keys(this.data).length>0},async init(){this.update(),setInterval(()=>{this.update()},m)}}));n.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,async update(){const t=await(await s.fetch(`/api/v1/brackets?type=${s.config.userMode}`,{method:"GET"})).json();this.brackets=t.data,this.standings=await s.pages.scoreboard.getScoreboard()},async init(){this.update(),setInterval(()=>{this.update()},m)}}));n.start();
